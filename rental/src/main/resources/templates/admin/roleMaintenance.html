<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<!-- header -->
<div th:include="common/header :: header"></div>
<body>
<!-- preloader -->
<div th:include="common/preloader :: preloader"></div>

<div id="main-wrapper">
    <!-- nav-header -->
    <div th:include="common/nav-header :: nav-header"></div>
    <!-- sidebar -->
    <div th:include="admin/sidebar :: sidebar"></div>

    <div class="content-body">
        <div class="container-fluid mt-3">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="active-member">
                                <div class="table-responsive">
                                    <table class="table table-xs mb-0">
                                        <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="role:${roles}">
                                            <td><label th:text="${role.name}"></label></td>
                                            <td>
                                                <button type="button" class="mb-1 btn btn-danger btn-sm"
                                                        data-toggle="modal"
                                                        data-target="#role-update-model"
                                                        th:data-roleName = "${role.name}"
                                                        th:data-roleId = "${role.id}">修改
                                                </button>
                                                <button type="button" class="mb-1 btn btn-primary btn-sm"
                                                        data-toggle="modal"
                                                        data-target="#role-show-model"
                                                        th:data-roleName = "${role.name}"
                                                        th:data-roleId = "${role.id}">查看
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- footer -->
    <div th:include="common/footer :: footer"></div>

    <!-- modal -->
    <div class="modal fade" id="role-update-model" tabindex="-1" role="dialog"
         aria-labelledby="role-update-model-label"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="role-update-model-label">修改角色信息</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-row">
                        <div class="col-md-6 mb-3">
                            <label for="role-update-name">Name</label>
                            <input type="text" class="form-control" id="role-update-name"
                                   placeholder="Name" value="" required>
                            <div class="invalid-feedback">
                                请输入角色名!
                            </div>
                            <div class="valid-feedback">
                                checked!
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="role-update-id-hidden">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="role-show-model" tabindex="-1" role="dialog"
         aria-labelledby="role-show-model-label"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="role-show-model-label">查看角色信息</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-row">
                        <div class="col-md-6 mb-3">
                            <label for="role-show-name">Name</label>
                            <input type="text" class="form-control" id="role-show-name"
                                   placeholder="Name" value="" required readonly>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
  $(function () {

    $('#role-update-model').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget)[0] // Button that triggered the modal
      var roleName = button.dataset.rolename // Extract info from data-* attributes
      var roleId = button.dataset.roleid
      $('#role-update-name').val(roleName)
      $('#role-update-id-hidden').val(roleId)
    })

    $('#role-show-model').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget)[0] // Button that triggered the modal
      var roleName = button.dataset.rolename // Extract info from data-* attributes
      $('#role-show-name').val(roleName)
    })
  })
</script>
</html>
